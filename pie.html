<!-- https://developers-dot-devsite-v2-prod.appspot.com/chart/interactive/docs/gallery/piechart.html -->
<html>
  <head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      // Llama el servicio web de forma s√≠ncrona
      function llamarws() {
            let xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", "http://localhost/codigosRorros/cogidosRorros_/frecuencia.php", false);
            xmlhttp.send();
            if (xmlhttp.status === 200) {
                let myObj = JSON.parse(xmlhttp.responseText);
                return myObj;
            } else {
                return "error";
            }
      }

      function drawChart() {

        var stats = llamarws();
        console.log("Regresa:");
        console.log(stats);
        
        var data = null;
        if (stats != "error") {
            data = google.visualization.arrayToDataTable([
            ['Episodio', 'Cantidad de storm troopers'],
            ['Fisico', stats.fisico],
            ['En Linea', stats.linea]
            ]);
        }

        var options = {
          title: 'Preferencia sobre compras en linea o presenciales'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="piechart" style="width: 900px; height: 500px;"></div>
  </body>
</html>